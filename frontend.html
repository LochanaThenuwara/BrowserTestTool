<!DOCTYPE html>
<html>
<head>
<title>AJAX test</title>
</head>
<body onload = test_button() >
<script type="text/javascript">

function xml_http_post(url, data) {
    var req = false;
    try {
        // Firefox, Opera 8.0+, Safari
        req = new XMLHttpRequest();
    }
    catch (e) {
        // Internet Explorer
        try {
            req = new ActiveXObject("Msxml2.XMLHTTP");
        }
        catch (e) {
            try {
                req = new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch (e) {
                alert("Your browser does not support AJAX!");
                return false;
            }
        }
    }
	
    req.open("POST", url, true);
    req.send(data);
}

function test_button() {
	var obj={"Browser":"Peter", "result":""};  
	alert(JSON.stringify(obj));
	//var obj = JSON.parse(info);
	if ("WebSocket" in window)
  {
    alert("WebSockets supported here!");
	obj.result="OK";
  }
  else
  {
    // the browser doesn't support WebSockets
    alert("WebSockets NOT supported here!");
	obj.result = "NOT";
  }
	
    xml_http_post('http://localhost:8080', JSON.stringify(obj))
}
</script>

</body>
</html>